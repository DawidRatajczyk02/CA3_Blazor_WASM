@page "/"
@inject YouTubeService YouTubeService
@using YouTubeBlazorApp.Services
@using YouTubeBlazorApp.Models


@code {
    private YouTubeSearchResponse? results;
    private string searchQuery = string.Empty;

    private async Task Search()
    {
        results = await YouTubeService.SearchVideosAsync(searchQuery);
    }
}

<h3>Search YouTube Videos</h3>
<input @bind="searchQuery" placeholder="Search..." />
<button @onclick="Search">Search</button>

@if (results?.Items == null || results.Items.Count == 0)
{
    <p>No results found.</p>
}
else
{
    @foreach (var item in results.Items)
    {
        <div>
            <img src="@item.Snippet?.Thumbnails?.Medium?.Url" alt="@item.Snippet?.Title" />
            <h4><a href="/video/@item.Id?.VideoId">@item.Snippet?.Title</a></h4>
            <p>@item.Snippet?.Description</p>
        </div>
    }
}